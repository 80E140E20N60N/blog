(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{449:function(e,t,r){"use strict";r.r(t);var n=r(23),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"小程序登录授权"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#小程序登录授权"}},[e._v("#")]),e._v(" 小程序登录授权")]),e._v(" "),r("h3",{attrs:{id:"调用-wx-login-接口"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调用-wx-login-接口"}},[e._v("#")]),e._v(" 调用 wx.login 接口")]),e._v(" "),r("p",[e._v("一般在onLoad()钩子函数中调用wx.login()， 获取临时登录凭证（code），并回传到开发者服务器。换取")]),e._v(" "),r("ol",[r("li",[e._v("用户在当前小程序的唯一标识 OpenID 、")]),e._v(" "),r("li",[e._v("用户在微信开放平台帐号下的唯一标识UnionID（若当前小程序已绑定到微信开放平台帐号）")]),e._v(" "),r("li",[e._v("本次登录的会话密钥 session_key。（用户数据的加解密通讯需要依赖会话密钥完成）")])]),e._v(" "),r("h3",{attrs:{id:"获取手机号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#获取手机号"}},[e._v("#")]),e._v(" 获取手机号")]),e._v(" "),r("p",[e._v("微信获取手机号，微信官方提供新旧两个版本的方法：")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/deprecatedGetPhoneNumber.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("旧版本接口指南"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("获取微信用户绑定的手机号，需先调用wx.login接口。因为需要用户主动触发才能发起获取手机号接口，所以该功能不由 API 来调用，需用 button 组件的点击来触发。")]),e._v(" "),r("p",[e._v("注意：wx.checkSession 可以进行登录态检查，避免 login 刷新登录态。")])])}),[],!1,null,null,null);t.default=a.exports}}]);